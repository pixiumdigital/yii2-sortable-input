!function(t){var e=function(e,i){this.$element=t(e),this.options=i,this.init(i),this.listen()};e.prototype={constructor:e,init:function(e){this.$sortable=t("#"+e.sortableId),this.delimiter=e.delimiter,this.$form=this.$element.closest("form"),this.initialValue=this.getKeys(),this.initialContent=this.$sortable.html(),this.$element.val(this.initialValue)},listen:function(){var e=this;e.$sortable.on("sortupdate",function(i){var n=t(i.originalEvent.detail.origin.container);if(n.length){if(n.attr("id")!=e.$sortable.attr("id")){t("input[data-sortable='"+n.attr("id")+"']").val(e.getKeys(n))}e.$element.val(e.getKeys()).trigger("change")}}),e.$form.on("reset",function(){setTimeout(function(){e.$sortable.html(e.initialContent),e.$sortable.sortable(e.options),e.$element.val(e.initialValue)},300)})},getKeys:function(){return(arguments.length>0?arguments[0]:this.$sortable).find("li").map(function(e,i){return t(i).data("key")}).get().join(this.delimiter)}},t.fn.sortableInput=function(i){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var a=t(this),s=a.data("sortableInput"),l="object"==typeof i&&i;s||a.data("sortableInput",s=new e(this,t.extend({},t.fn.sortableInput.defaults,l,t(this).data()))),"string"==typeof i&&s[i].apply(s,n)})},t.fn.sortableInput.defaults={sortableId:"",delimiter:","}}(jQuery);